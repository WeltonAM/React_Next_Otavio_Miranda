fragment image on UploadFile {
  alternativeText
  url
}

fragment tag on Tag {
  displayName
  slug
}

fragment cover on Post {
  cover {
    data {
      id
      attributes {
        ...image
      }
    }
  }
}

fragment author on Author {
  displayName
  slug
}

fragment category on Category {
  displayName
  slug
}

fragment tags on Post {
  tags {
    data {
      id
      attributes {
        ...tag
      }
    }
  }
}

fragment authorPost on Post {
  author {
    data {
      id
      attributes {
        ...author
      }
    }
  }
}

fragment categories on Post {
  categories {
    data {
      id
      attributes {
        ...category
      }
    }
  }
}

fragment menuLink on ComponentMenuMenuLink {
  id
  link
  text
  newTab
}

fragment post on Post {
  slug
  title
  excerpt
  content
  createdAt
  allowComments
  ...cover
  ...categories
  ...tags
  ...authorPost
}

fragment settings on Setting {
  blogName
  blogDescription
logo {
  data {
      id
    attributes {
      ...image
      }
    }
  }
menuLink {
...menuLink
  }
  text
}

  query GET_POSTS(
    $categorySlug: StringFilterInput
    $postSlug: StringFilterInput
    $postSearch: StringFilterInput
    $authorSlug: StringFilterInput
    $tagSlug: StringFilterInput
    $sort: [String] = "createdAt:desc"
  ) {
    setting {
      data {
        attributes {
          ...settings
        }
      }
    }
    posts(
      sort: $sort
      filters: {
        slug: $postSlug
        or: [
          { title: $postSearch }
          { content: $postSearch }
          { excerpt: $postSearch }
        ]
        categories: { slug: $categorySlug }
        author: { slug: $authorSlug }
        tags: { slug: $tagSlug }
      }
    ) {
      data {
        id
        attributes {
          ...post
        }
      }
    }
  }
